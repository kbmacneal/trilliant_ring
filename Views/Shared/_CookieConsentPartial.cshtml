@using Microsoft.AspNetCore.Http.Features 
@{ var consentFeature = Context.Features.Get
<ITrackingConsentFeature>(); var showBanner = !consentFeature?.CanTrack ?? false; var cookieString = consentFeature?.CreateConsentCookie(); } 
    @if (showBanner) {
    <div class="alert alert-dismissible alert-success" id="cookieConsent" role="alert">
        <div class="d-flex flex-column align-items-center">
            <p class="align-items-center">
                We use cookies to provide a smooth browsing experience. Secure Cookie technology is also used to mitigate certain attacks. Connection data is provided to a third party to monitor web services. For more information, click Learn More below. You consent to our cookies if you continue to use this site. You may review our policy below, otherwise please accept the cookie policy before continuing.
            </p>
            <div class="navbar-right">
                <a asp-controller="GDPR" asp-action="Index" class="btn btn-secondary">Learn More</a>
                <button type="button" class="btn btn-success" data-cookie-string="@cookieString">Accept</button>
            </div>
        </div>

    </div>

    <script>
        function hide(elements) {
            elements = elements.length ? elements : [elements];
            for (var index = 0; index < elements.length; index++) {
                elements[index].style.display = 'none';
            }
        }

        (function() {
            document.querySelector("#cookieConsent button[data-cookie-string]").addEventListener("click", function(el) {
                document.cookie = el.target.dataset.cookieString;
                document.querySelector("#cookieConsent").classList.add("hidden");
                hide(document.getElementById('cookieConsent'));
            }, false);


        })();
    </script>
    }